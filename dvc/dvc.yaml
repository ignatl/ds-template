stages:
  load_clean:
    wdir: ..
    cmd: python ds_template/dvc_steps/load_clean.py --input_path ${load_clean.input_path}
      --output_path ${load_clean.output_path}
    deps:
    - ds_template/dvc_steps/load_clean.py
    - ${load_clean.input_path}
    params:
    - dvc/params.yaml:
      - load_clean
    outs:
    - ${load_clean.output_path}
  featurize:
    wdir: ..
    cmd: python ds_template/dvc_steps/featurize.py --column_name ${feature.column_name}
      --input_path ${load_clean.output_path} --output_path ${feature.output_path}
      --obj_path ${feature.obj_path}
    deps:
    - ds_template/dvc_steps/featurize.py
    - ${load_clean.output_path}
    - ds_template/features/mock_feature.py
    params:
    - dvc/params.yaml:
      - feature
    outs:
    - ${feature.output_path}
    - ${feature.obj_path}
  train_model:
    wdir: ..
    cmd: python ds_template/dvc_steps/train_model.py --feature-path ${feature.output_path}
      --data-path ${load_clean.output_path} --output-path ${train_model.output_path}
      --model-path ${train_model.obj_path} --constant ${train_model.constant}
    deps:
    - ds_template/dvc_steps/train_model.py
    - ds_template/models/constant_model.py
    - ${feature.output_path}
    - ${load_clean.output_path}
    - ${feature.obj_path}
    params:
    - dvc/params.yaml:
      - train_model
    outs:
    - ${train_model.output_path}
    - ${train_model.obj_path}
  inference:
    wdir: ..
    cmd: python ds_template/dvc_steps/do_inference.py --train_data_path ${load_clean.output_path}
      --y_data_path ${inference.y_data_path} --inference_data_path ${inference.inference_data_path}
      --feature_path ${feature.obj_path} --model_path ${train_model.obj_path}
      --output_path ${inference.output_path} --inference_path ${inference.obj_path}
    deps:
    - ds_template/dvc_steps/do_inference.py
    - ds_template/inference/inference.py
    - ds_template/features/mock_feature.py
    - ds_template/models/constant_model.py
    - ${inference.y_data_path}
    - ${inference.inference_data_path}
    - ${load_clean.output_path}
    - ${feature.obj_path}
    - ${train_model.obj_path}
    params:
    - dvc/params.yaml:
      - inference
    outs:
    - ${inference.output_path}
    - ${inference.obj_path}
  
